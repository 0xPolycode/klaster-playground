<div *ngIf="(tokenBridgedHash$ | async)?.length === 0" class="w-full flex flex-row justify-center py-24">
    <div class="max-w-xl w-full bg-white dark:bg-slate-800 dark:border-slate-900 border border-slate-200 p-8 rounded-md">
        <div class="uppercase font-bold dark:text-indigo-200 text-rose-700 mb-6 items-center
     text-center text-lg flex flex-col gap-y-3">

     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-8 h-8">
        <path fill-rule="evenodd" d="M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z" clip-rule="evenodd" />
      </svg>
            <div class="text-transparent bg-clip-text bg-gradient-to-r from-fuchsia-700 to-rose-600">Bridge Multichain ERC20</div>
        </div>

        <div class="uppercase font-semibold dark:text-indigo-200 text-rose-700 text-sm">
            Select networks
        </div>
        <div class="w-full mt-2 gap-y-1 grid grid-cols-12 text-xs text-slate-700">
            <div class="uppercase font-medium text-[10px] text-slate-400 col-span-7 ">
                Source
            </div>
            <div class="uppercase font-medium text-[10px] text-slate-400 col-span-5">
                Destination
            </div>
            <div class="py-3 border col-span-5 border-slate-100 rounded-md flex flex-row gap-x-2
                 uppercase font-semibold justify-center items-center dark:bg-slate-700 dark:border-slate-600 dark:text-white bg-slate-50">
                <img class="h-5" src="../../assets/eth.png" alt="" srcset="">
                <div>Ethereum Sepolia</div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                  </svg>
            </div>
            <div class="col-span-2 items-center flex flex-row justify-center text-slate-700 dark:text-slate-300">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12.75 15l3-3m0 0l-3-3m3 3h-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                                 
            </div>
            <div *ngIf="selectedNetworkChainId$ | async as chainId" (click)="toggleNetworkSelectModal()" 
                class="py-3 border col-span-5 dark:text-slate-100 dark:hover:bg-slate-600 dark:border-slate-700 border-slate-100 rounded-md flex flex-row gap-x-2
                 uppercase font-semibold justify-center items-center hover:bg-slate-50 cursor-pointer">
                <img class="h-5" src="../../assets/{{getNetworkByChainId(chainId)?.logoUri}}" alt="" srcset="">
                <div>{{getNetworkByChainId(chainId)?.name}}</div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                  </svg>
            </div>
        </div>

        <div class="uppercase font-semibold mt-8 text-rose-700 dark:text-indigo-200 text-sm">
            Select token
        </div>

        <div *ngIf="itemsSub | async as items; else loading" class="mt-2 flex flex-row">
            <ng-container *ngIf="items.length > 0; else loading">
                <div *ngIf="selectedTokenIndex$ | async as index" (click)="toggleTokenSelectModal()"
                class="py-3 px-8 dark:hover:bg-slate-600 text-xs border col-span-5 border-slate-100 dark:border-slate-700 dark:text-slate-200 text-slate-700 rounded-md flex flex-row gap-x-2
                uppercase font-semibold justify-center items-center hover:bg-slate-50 cursor-pointer">
                    <div class="bg-indigo-700 rounded-full w-6 h-6 flex flex-row justify-center items-center text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                          </svg>
                          
                    </div>
                    {{items[index - 1].name}}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                      </svg>
                      
                </div>
            </ng-container>
            
        </div>

        <ng-template #loading>
            <div>
                <app-loader></app-loader>
            </div>
        </ng-template>
        
        
        <div class="uppercase font-semibold mt-8 dark:text-indigo-200 text-rose-700 text-sm">
            Enter amount
        </div>
        <div class="w-full font-mono px-4 border text-slate-700 rounded-md border-slate-100 dark:border-slate-600 mt-2">
            <input [formControl]="tokenAmountFormControl" placeholder="1000.00" class="outline-none dark:bg-transparent w-full py-3" type="text">
        </div>
        <div *ngIf="itemsSub | async as items" class="w-full mt-2 flex flex-row justify-between items-center">
            <div *ngIf="selectedTokenIndex$ | async as index" class="text-xs text-slate-500">
                <div class="uppercase font-semibold">Balance</div>
                <div>{{items[index - 1].balance}} {{items[index - 1].name}}</div> 
            </div>
            <button (click)="setMaxValue()" class="py-2 uppercase text-[10px] font-semibold bg-slate-100 text-slate-600 px-8 rounded-full">Max</button>
        </div>
        <button (click)="bridgeToken()" class="app-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                <path fill-rule="evenodd" d="M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z" clip-rule="evenodd" />
              </svg>
            <div *ngIf="bridgeProcessing$ | async; else bridgeButton">
                Loading...
            </div>
            <ng-template #bridgeButton>
                <div>
                    Bridge
                </div>     
            </ng-template>
         
        </button>

    </div>

</div>

<div class="w-full flex flex-row justify-center py-16" *ngIf="tokenBridgedHash$ | async as hash">
    <div class="max-w-xl w-full p-8 flex flex-col gap-y-4 items-center border border-slate-100 bg-white rounded-md">
        <div class="text-base font-bold text-green-700">Sucess!</div>
        <div class="text-slate-500 font-semibold">Token bridged!</div>
        <div class="text-slate-500 text-sm">It may take up to 30 minutes for the bridging process to be complete. You can track the progress by clicking the 
            button below.
        </div>
        <a href="https://ccip.chain.link/tx/{{hash}}" class="app-button">
            Check status
        </a>
    </div>
</div>

<div class="w-screen h-screen bg-[rgba(0,0,0,0.3)] backdrop-blur-[1px] text-slate-700
     absolute top-0 left-0 flex flex-col items-center justify-center" *ngIf="selectNetworkModalVisible$ | async">
    
    <div class="max-w-md w-full rounded-md bg-white shadow-sm">
        <div class="uppercase text-sm text-center font-semibold pt-8 py-4 px-8">Select destination network</div>
        <div class="flex flex-col border rounded-md border-slate-100 text-xs font-medium mt-4">
            <div *ngFor="let network of networks" 
            [class.!bg-indigo-50]="(selectedNetworkChainId$ | async) === network.chainId"
            [class.!text-indigo-700]="(selectedNetworkChainId$ | async) === network.chainId"
            (click)="selectNetwork(network.chainId)"
            class="px-8 py-4 border-b border-slate-100 hover:bg-slate-50 cursor-pointer uppercase flex flex-row items-center gap-x-2">
                <img class="h-4" src="../../assets/{{network.logoUri}}" alt="" srcset="">
                {{network.name}}
            </div>
        </div>
    </div>

</div>


<div *ngIf="tokenSelectModalVisible$ | async" 
    class="w-screen h-screen absolute top-0 flex flex-row justify-center items-center left-0 bg-[rgba(0,0,0,0.3)] backdrop-blur-[1px]">

    <div class="max-w-md w-full bg-white rounded-md">
        <div class="pt-8 pb-4 text-slate-700 font-semibold px-8 flex flex-row justify-between uppercase text-sm">
            <div></div>
            <div class="text-rose-700">Select Token</div>
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>                  
            </div>
        </div>
        <div *ngIf="itemsSub | async as items" class="w-full rounded-md font-medium text-sm">
            <div class="px-8 py-4 uppercase flex flex-row rounded-t-md text-xs font-semibold text-indigo-700 
             justify-between items-center border-slate-100 border-b">
                <div>Name</div>
                <div>Balance</div>
            </div>
            <div class="max-h-64 overflow-y-scroll">
                <div *ngFor="let item of items; let i = index" (click)="selectToken(i)"
                [class.!bg-indigo-50]="(selectedTokenIndex$ | async) === (i + 1)"
                [class.!text-indigo-700]="(selectedTokenIndex$ | async) === (i + 1)"
                class="px-8 py-4 hover:bg-slate-50 cursor-pointer flex flex-row justify-between items-center border-slate-100 border-b">
                    <div>{{item.name}}</div>
                    <div class="text-xs">{{item.balance}}</div>
                </div>
            </div>
            
            <div *ngIf="items.length === 0" class="w-full py-5 flex flex-row justify-center items-center gap-x-2 text-center text-slate-500 text-xs">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
                  </svg>                  
                No multichain tokens found on this wallet
            </div>
            
        </div>
    </div>

</div>

