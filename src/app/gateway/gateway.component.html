<div class="w-screen relative h-screen flex flex-col justify-center overflow-hidden">
    <div class="border-b border-slate-200 z-50 fixed top-0 left-0 bg-white flex flex-row justify-center w-full">
        <div class="max-w-7xl w-full grid grid-cols-12 my-2">
            <div class="col-span-2 flex flex-col justify-center pr-4">
                <img class="h-6 object-contain" src="../../assets/klstr.png" alt="" srcset="">
            </div>
            <div class="col-span-3 font-medium pl-4 flex flex-col justify-center">
                <div *ngIf="connectedNetwork$ | async as network" (click)="logOut()" class="w-full flex flex-row justify-center gap-x-3 bg-slate-100 items-center
                    hover:bg-slate-700 cursor-pointer hover:text-white
                    text-slate-700 py-2 rounded-md px-6 text-xs transition-all ">
                    <div class="flex flex-row gap-x-2 items-center">
                        <img class="h-4" src="../../assets/{{network.logoUri}}" alt="" srcset="">
                    </div>
                    <div>
                        {{network.name}}
                    </div>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
                    </svg>

                </div>
            </div>
            <div class="col-span-1 flex flex-row items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12.75 15l3-3m0 0l-3-3m3 3h-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <div *ngIf="currentSession$ | async as session; else noSession" class="col-span-3 relative pr-4">
                <div (click)="toggleChainSelector()" *ngIf="selectedChain$ | async as chain" class="flex flex-row items-center justify-center h-full border border-slate-100 hover:bg-slate-100
                    px-4 text-xs font-semibold uppercase gap-x-3 rounded-md cursor-pointer">
                    <img class="h-5" src="../../assets/{{chain.logoUri}}" alt="" srcset="">
                    <div>{{chain.name}}</div>
                    <div>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                        </svg>

                    </div>
                </div>
                <div *ngIf="chainSelectorVisible$ | async"
                    class="absolute top-12 border w-60 border-slate-100 text-slate-700 rounded-md left-0 bg-white text-xs uppercase font-semibold">
                    <div class="px-6 font-bold mt-5">
                        Switch dApp network
                    </div>
                    <hr class="mt-4 border-slate-100">
                    <div (click)="setChain(chain)" class="flex flex-row items-center
                        hover:bg-slate-50 cursor-pointer rounded-md px-8 gap-x-2 py-4" *ngFor="let chain of chains">
                        <img class="h-5" src="../../assets/{{chain.logoUri}}" alt="" srcset="">
                        <div>{{chain.name}}</div>
                    </div>
                </div>
            </div>
            <ng-template #noSession>
                <div class="col-span-4">
                    <input [formControl]="walletConnectURIForm" class="w-full border py-2 text-xs px-4 rounded-md"
                        placeholder="Paste WalletConnect URI here to connect Klaster to dApp" type="text">
                </div>
            </ng-template>
            <div class="col-span-2 relative" *ngIf="contractWalletAddresses$ | async as addresses">
                <div (click)="toggleAddressSelectorVisible()"
                    class="ml-4 flex flex-row justify-between items-center text-xs rounded-md
                text-slate-700 font-medium h-full border border-slate-200 hover:bg-slate-700 hover:text-white transition-all px-8 cursor-pointer">
                    <div class="flex flex-row gap-x-3 items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3" />
                        </svg>

                        <div *ngIf="selectedWalletAddress$ | async as address">
                            {{address | shorten:5:3}}
                        </div>
                    </div>

                    <div>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
                        </svg>
                    </div>
                </div>
                <div *ngIf="addressSelectorVisible$ | async"
                    class="absolute flex flex-col top-10 border rounded-md text-xs text-slate-700 font-medium w-72 right-0 bg-white pt-4">
                    <div class="uppercase text-slate-500 px-4">My addresses</div>
                    <hr class="mt-2 border-slate-100">
                    <ng-container *ngIf="selectedWalletAddress$ | async as selected">
                        <div class="tracking-widest px-4 hover:bg-slate-100 pt-3 cursor-pointer"
                            *ngFor="let address of addresses" (click)="setSelectedWalletAddress(address)">
                            <div class="flex flex-row justify-between">
                                <div>{{address | shorten:10:8}}</div>
                                <div class="text-indigo-700" *ngIf="address === selected">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                                        <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" />
                                      </svg>
                                      
                                </div>
                            </div>
                            
                            <hr class="mt-3 border-slate-100">
                        </div>
                    </ng-container>

                </div>
            </div>
        </div>
    </div>
    <!-- <div class="fixed top-12 border z-[100] w-screen flex flex-row justify-center py-2 bg-white">
        <div class="max-w-6xl w-full flex flex-row justify-center gap-x-2">
            <input placeholder="dApp URL" class="border w-96 text-sm px-4 py-1 rounded-md" type="text">
            <div class="px-4 bg-rose-700 text-white font-semibold flex flex-row items-center justify-center rounded-md
                uppercase text-xs">
                Go
            </div>
        </div>
    </div> -->
    <iframe src="https://app.uniswap.org" class="w-full bg-red-50 fixed iframe-h top-12"></iframe>

</div>

<ng-template #apps>
    <div class="w-full flex flex-row justify-center">
        <div class="max-w-5xl w-full grid grid-cols-5 text-rose-700 gap-4 uppercase text-sm font-semibold">

            <div (click)="setIframeSrc('https://app.uniswap.org')" class="bg-[rgba(255,255,255,0.5)] shadow-sm p-4 w-full h-full flex cursor-pointer
             flex-row gap-x-2 items-center justify-center hover:bg-rose-600 rounded-md hover:text-white">
                Uniswap
            </div>
            <div (click)="setIframeSrc('https://aave.org')" class="bg-[rgba(255,255,255,0.5)] shadow-sm p-4 w-full h-full flex cursor-pointer
             flex-row gap-x-2 items-center justify-center hover:bg-rose-600 rounded-md hover:text-white">
                AAVE
            </div>
            <div (click)="setIframeSrc('https://curve.fi')" class="bg-[rgba(255,255,255,0.5)] shadow-sm p-4 w-full h-full flex cursor-pointer
             flex-row gap-x-2 items-center justify-center hover:bg-rose-600 rounded-md hover:text-white">
                Curve
            </div>
            <div class="bg-[rgba(255,255,255,0.5)] shadow-sm p-4 w-full h-full flex cursor-pointer
             flex-row gap-x-2 items-center justify-center hover:bg-rose-600 rounded-md hover:text-white">
                Synthetix
            </div>
            <div (click)="setIframeSrc('https://sushi.com')" class="bg-[rgba(255,255,255,0.5)] shadow-sm p-4 w-full h-full flex cursor-pointer
             flex-row gap-x-2 items-center justify-center hover:bg-rose-600 rounded-md hover:text-white">
                SushiSwap
            </div>
        </div>
    </div>

</ng-template>

<div *ngIf="txRequestedInfo$ | async as info" class="fixed top-0 flex flex-row justify-center items-center
 left-0 bg-[rgba(0,0,0,0.7)] backdrop-blur-[3px] w-screen h-screen ">

    <div class="max-w-md w-full bg-white p-8 rounded-md">

        <div class="w-full flex flex-row justify-center">
            <img class="h-6 mb-3" src="../../assets/klaster-icon.png" alt="" srcset="">
        </div>
        <div class="uppercase font-bold text-center text-transparent 
            bg-clip-text bg-gradient-to-r from-rose-600 to-fuchsia-700">Cross-chain <br> transaction requested</div>

        
        <ng-container *ngIf="connectedNetwork$ | async as connectedNetwork">
            <ng-container *ngIf="selectedChain$ | async as selectedChain">
                <div class="mt-4 text-xs flex flex-col gap-y-1">
                    <div class="font-semibold uppercase text-rose-600">From</div>
                    <div>{{info.from}}</div>
                    <div class="font-semibold uppercase mt-2 text-rose-600">To</div>
                    <div>{{info.to}}</div>
                    <div class="font-semibold uppercase mt-2 text-rose-600">Signing & paying gas on</div>
                    <div class="flex flex-row gap-x-2 items-center">
                        <img class="h-4" src="../../assets/{{connectedNetwork.logoUri}}" alt="" srcset="">
                        {{connectedNetwork.name}}
                    </div>
                    <div class="font-semibold uppercase mt-2 text-rose-600">Executing TX on</div>
                    <div class="flex flex-row gap-x-2 items-center">
                        <img class="h-4" src="../../assets/{{selectedChain.logoUri}}" alt="" srcset="">
                        {{selectedChain.name}}
                    </div>

                    <div class="w-full mt-3 px-6 py-2 bg-slate-50 rounded-md flex flex-row items-center">
                        <div class=" w-full flex flex-col gap-y-1">

                            <div class="text-sm font-medium text-slate-600 flex flex-row gap-x-2 items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                    <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z" clip-rule="evenodd" />
                                  </svg>                                  
                                <div class="flex flex-col">
                                    <div class="text-[10px]">Estimated duration</div>
                                    <div class="-mt-1">22m 30s</div>
                                </div>
                            </div>
                        </div>
                        <div class=" w-full flex flex-col items-end gap-y-1">

                            <div class="text-sm font-medium text-slate-600 flex fle-row gap-x-2 items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                    <path d="M12 7.5a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z" />
                                    <path fill-rule="evenodd" d="M1.5 4.875C1.5 3.839 2.34 3 3.375 3h17.25c1.035 0 1.875.84 1.875 1.875v9.75c0 1.036-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 011.5 14.625v-9.75zM8.25 9.75a3.75 3.75 0 117.5 0 3.75 3.75 0 01-7.5 0zM18.75 9a.75.75 0 00-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 00.75-.75V9.75a.75.75 0 00-.75-.75h-.008zM4.5 9.75A.75.75 0 015.25 9h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V9.75z" clip-rule="evenodd" />
                                    <path d="M2.25 18a.75.75 0 000 1.5c5.4 0 10.63.722 15.6 2.075 1.19.324 2.4-.558 2.4-1.82V18.75a.75.75 0 00-.75-.75H2.25z" />
                                  </svg>                                  
                                <div class="flex flex-col">
                                    <div class="text-[10px]">0.0037 ETH</div>
                                    <div class="-mt-1">$5.92</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="w-full bg-gradient-to-r from-rose-600 to-fuchsia-700 flex flex-row gap-x-2 items-center justify-center cursor-pointer hover:from-rose-800 hover:to-fuchsia-800
                        py-3 mt-2 text-center text-white uppercase rounded-md font-semibold">
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                              </svg>
                              
                        </div>
                        <div>
                            Approve Transaction
                        </div>
                        
                    </div>
                    
                    
                    <div class="mt-4 flex flex-col gap-y-1 items-center">
                        <div class="text-slate-500">Powered by</div>
                        <div class="flex flex-row gap-x-2">
                            <div class="font-semibold text-slate-500">Chainlink CCIP</div>
                            <img class="h-4" src="../../assets/ccip.png" alt="" srcset="">
                        </div>
                    </div>
                </div>
            </ng-container>
        </ng-container>

    </div>

</div>